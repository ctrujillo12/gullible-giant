---
import { onMount } from 'astro/client';

export interface Item {
  src: string;
  alt: string;
  link: string;
  title: string;
  price: string;
}

interface Props {
  items: Item[];
}

const { items } = Astro.props as Props;
---

<div class="glider-container">
  <button class="glider-prev" aria-label="Previous">‹</button>
  <div class="glider">
    {items.map(item => (
      <a href={item.link} target="_blank" rel="noopener" class="carousel-card">
        <img src={item.src} alt={item.alt} />
        <div class="card-info">
          <p class="title">{item.title}</p>
          <p class="price">{item.price}</p>
        </div>
      </a>
    ))}
  </div>
  <button class="glider-next" aria-label="Next">›</button>
  <div class="dots"></div>
</div>

<script is:inline type="module">
  import Glider from 'glider-js';

  onMount(() => {
    const container = document.querySelector('.glider-container');
    const gliderEl = container.querySelector('.glider');
    const prevBtn = container.querySelector('.glider-prev');
    const nextBtn = container.querySelector('.glider-next');
    const dotsEl = container.querySelector('.dots');

    new Glider(gliderEl, {
      slidesToShow: 1,
      slidesToScroll: 1,
      rewind: true,
      dots: dotsEl,
      arrows: {
        prev: prevBtn,
        next: nextBtn,
      },
    });
  });
</script>

<style>
  .glider-container {
    max-width: 90%;
    margin: auto;
    position: relative;
    padding: 1rem 0;
  }

  .glider {
    display: flex;
    gap: 1rem;
    overflow: hidden;
  }

  .glider-prev,
  .glider-next {
    background: rgb(219, 250, 81);
    border: none;
    font-size: 2rem;
    padding: 0.5rem 1rem;
    cursor: pointer;
  }

  .carousel-card {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-decoration: none;
    color: rgb(219, 250, 81);
    width: 250px;
    border-radius: 12px;
    overflow: hidden;
    background: #666;
    padding: 0.5rem;
    transition: transform 0.2s ease;
  }

  .carousel-card:hover {
    transform: scale(1.02);
  }

  .carousel-card img {
    width: 100%;
    height: 250px;
    object-fit: cover;
    border-radius: 12px;
  }

  .card-info {
    margin-top: 0.5rem;
    text-align: center;
  }

  .card-info .title {
    font-weight: 600;
    font-size: 1rem;
    margin-bottom: 0.25rem;
    color: rgb(219, 250, 81);
  }

  .card-info .price {
    color: rgb(219, 250, 81);
    font-size: 0.9rem;
  }
</style>
