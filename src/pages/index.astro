---
import ShopLayout from '../layouts/ShopLayout.astro';
import { products } from '../content/products.js';
---

<ShopLayout title="Recent finds:">
  <h2 style="text-align: center; margin-bottom: 2rem;">Recent finds</h2>

  <div class="carousel-wrapper">
    <button class="glider-prev">‹</button>

    <div class="glider">
      {products.map((product) => (
        <div class="shop-item">
          <img src={product.image} alt={product.name} />
          <p>{product.name}</p>
          <a href={product.link} target="_blank">View Product</a>
        </div>
      ))}
    </div>

    <button class="glider-next">›</button>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/glider-js@1/glider.min.js"></script>
  <script>
    window.addEventListener('load', function () {
      new Glider(document.querySelector('.glider'), {
        slidesToShow: 5,
        slidesToScroll: 1,
        draggable: true,
        arrows: {
          prev: '.glider-prev',
          next: '.glider-next'
        },
        responsive: [
          {
            breakpoint: 800,
            settings: {
              slidesToShow: 3,
            }
          },
          {
            breakpoint: 480,
            settings: {
              slidesToShow: 1,
            }
          }
        ]
      });
    });
  </script>

  <style>
    .carousel-wrapper {
      position: relative;
      max-width: 1000px;
      margin: auto;
    }

    .glider {
      margin: 0 auto;
    }

    .shop-item {
      width: 120px; /* Was 160px → now 75% */
      text-align: center;
      padding: 0.5rem;
      background: white;
      border-radius: 6px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      margin: 0 6px;
      transition: transform 0.3s;
      color: black;
      flex-shrink: 0;
    }

    .shop-item:hover {
      transform: scale(1.03);
    }

    .shop-item img {
      width: 100%;
      height: auto;
      border-radius: 4px;
    }

    .shop-item p {
      margin: 0.4rem 0;
      font-size: 0.75rem;
	  transform: scale(0.75);
  	  transform-origin: center;
    }

    .shop-item a {
      color: #007f5f;
      text-decoration: none;
      font-weight: bold;
      font-size: 0.75rem;
    }

    .glider-prev,
    .glider-next {
      background: #007f5f;
      color: #fff;
      border: none;
      padding: 0.4rem 0.6rem;
      font-size: 1rem;
      cursor: pointer;
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      z-index: 2;
      border-radius: 50%;
    }

    .glider-prev {
      left: -25px;
    }

    .glider-next {
      right: -25px;
    }

    @media (max-width: 768px) {
      .glider-prev,
      .glider-next {
        display: none;
      }
    }
  </style>
</ShopLayout>
